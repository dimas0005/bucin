<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pesan Untukmu üíå</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Poppins',sans-serif;
}

body{
    height:100vh;
    background:linear-gradient(180deg,#071a2f,#020c16);
    display:flex;
    justify-content:center;
    align-items:center;
    overflow:hidden;
    color:white;
}

/* background bubble */
.bubble{
    position:absolute;
    width:40px;
    height:40px;
    border-radius:50%;
    border:2px solid rgba(255,255,255,0.1);
    animation:float linear infinite;
}

@keyframes float{
    from{transform:translateY(120vh);}
    to{transform:translateY(-140vh);}
}

/* message icon */
.message-box{
    text-align:center;
    cursor:pointer;
    animation:pulse 2s infinite;
    z-index:5;
}

@keyframes pulse{
    0%{transform:scale(1);}
    50%{transform:scale(1.08);}
    100%{transform:scale(1);}
}

.message-icon{
    font-size:70px;
}

.message-text{
    margin-top:10px;
    font-size:14px;
    opacity:0.85;
}

/* envelope */
.envelope{
    width:260px;
    height:170px;
    position:relative;
    display:none;
    cursor:pointer;
    z-index:3;
}

.back{
    position:absolute;
    width:100%;
    height:100%;
    background:#ff8fb1;
    border-radius:12px;
}

.front{
    position:absolute;
    width:0;
    height:0;
    border-left:130px solid transparent;
    border-right:130px solid transparent;
    border-top:90px solid #ff6f9e;
    bottom:0;
    z-index:3;
}

.flap{
    position:absolute;
    width:0;
    height:0;
    border-left:130px solid transparent;
    border-right:130px solid transparent;
    border-bottom:90px solid #ffc2d6;
    top:0;
    transform-origin:top;
    transition:0.7s ease;
    z-index:4;
}

.inner-letter{
    position:absolute;
    width:90%;
    height:90%;
    background:white;
    top:5%;
    left:5%;
    border-radius:10px;
    z-index:2;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:22px;
    color:#ff6f9e;
    transition:0.7s ease;
}

.envelope.open .flap{
    transform:rotateX(180deg);
}

.envelope.open .inner-letter{
    transform:translateY(-120%);
}

/* popup FIX */
.popup{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.65);
    display:none;
    justify-content:center;
    align-items:center;
    z-index:999; /* üî• PALING DEPAN */
}

.paper{
    background:white;
    width:90%;
    max-width:360px;
    padding:25px;
    border-radius:18px;
    animation:pop 0.4s ease;
    color:#333;
    text-align:center;
}

@keyframes pop{
    from{transform:scale(0.6);opacity:0;}
    to{transform:scale(1);opacity:1;}
}

.paper h2{
    color:#ff6f9e;
    margin-bottom:10px;
}

.paper p{
    font-size:14px;
    line-height:1.6;
}

.close{
    margin-top:15px;
    color:#ff6f9e;
    font-weight:bold;
    cursor:pointer;
}
</style>
</head>

<body>

<script>
for(let i=0;i<20;i++){
    let b=document.createElement('div');
    b.className='bubble';
    b.style.left=Math.random()*100+'%';
    b.style.animationDuration=(8+Math.random()*10)+'s';
    document.body.appendChild(b);
}
</script>

<div class="message-box" id="messageBox" onclick="showEnvelope()">
    <div class="message-icon">üì©</div>
    <div class="message-text">Kamu punya pesan</div>
</div>

<div class="envelope" id="envelope" onclick="openEnvelope()">
    <div class="back"></div>
    <div class="inner-letter">üíå</div>
    <div class="front"></div>
    <div class="flap"></div>
</div>

<div class="popup" id="popup">
    <div class="paper">
        <h2>Hai Kamu ‚ù§Ô∏è</h2>
        <p>
            Bug sudah diperbaiki üéâ<br><br>
            Sekarang popup surat tidak akan tertutup
            oleh amplop atau segitiga pink lagi.
        </p>
        <div class="close" onclick="closePopup()">Tutup</div>
    </div>
</div>

<script>
function showEnvelope(){
    messageBox.style.display='none';
    envelope.style.display='block';
}

function openEnvelope(){
    envelope.classList.add('open');
    envelope.style.pointerEvents='none'; // ‚õî cegah klik ulang
    setTimeout(()=>{
        popup.style.display='flex';
    },800);
}

function closePopup(){
    popup.style.display='none';
}
</script>

</body>
</html>
